{% extends 'base.html' %}
{% block content %}
{% load category_tags %}
{% load product_filters %}

<!-- Dynamic Parent Category Sections -->
{% for category_data in parent_categories_data %}
<section class="section-maker">
    <div class="container">
        <div class="sec-maker-header text-center">
            <h3 class="sec-maker-h3">{{ category_data.parent_category.parent_name|upper }}</h3>
            <!-- <p>{{ category_data.total_products }} Products Available</p> -->

            <!-- Dynamic Tabs for each parent category -->
            <ul class="nav tab-nav-style-1-a justify-content-center">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#{{ category_data.slug }}-latest-products">
                        Latest Products
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#{{ category_data.slug }}-best-selling-products">
                        Best Selling
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#{{ category_data.slug }}-top-rating-products">
                        Top Rating
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#{{ category_data.slug }}-featured-products">
                        Featured Products
                    </a>
                </li>
            </ul>
        </div>

        <div class="wrapper-content">
            <div class="outer-area-tab">
                <div class="tab-content">

                    <!-- Latest Products Tab -->
                    <div class="tab-pane active show fade" id="{{ category_data.slug }}-latest-products">
                        {% if category_data.latest_products|has_products %}
                        <div class="slider-fouc">
                            <div class="products-slider owl-carousel" data-item="4">
                                {% for product in category_data.latest_products %}
                                {% include 'includes/product-card.html' with item=product %}
                                {% endfor %}
                            </div>
                        </div>
                        {% else %}
                        <div class="product-not-found">
                            <div class="not-found">
                                <h2>SORRY!</h2>
                                <h6>No latest products available in {{ category_data.parent_category.parent_name }}.
                                </h6>
                            </div>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Best Selling Products Tab -->
                    <div class="tab-pane fade" id="{{ category_data.slug }}-best-selling-products">
                        {% if category_data.best_selling_products|has_products %}
                        <div class="slider-fouc">
                            <div class="products-slider owl-carousel" data-item="4">
                                {% for product in category_data.best_selling_products %}
                                {% include 'includes/product-card.html' with item=product %}
                                {% endfor %}
                            </div>
                        </div>
                        {% else %}
                        <div class="product-not-found">
                            <div class="not-found">
                                <h2>SORRY!</h2>
                                <h6>No best selling products available in {{ category_data.parent_category.parent_name
                                    }}.</h6>
                            </div>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Top Rating Products Tab -->
                    <div class="tab-pane fade" id="{{ category_data.slug }}-top-rating-products">
                        {% if category_data.top_rating_products|has_products %}
                        <div class="slider-fouc">
                            <div class="products-slider owl-carousel" data-item="4">
                                {% for product in category_data.top_rating_products %}
                                {% include 'includes/product-card.html' with item=product %}
                                {% endfor %}
                            </div>
                        </div>
                        {% else %}
                        <div class="product-not-found">
                            <div class="not-found">
                                <h2>SORRY!</h2>
                                <h6>No top rated products available in {{ category_data.parent_category.parent_name }}.
                                </h6>
                            </div>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Featured Products Tab -->
                    <div class="tab-pane fade" id="{{ category_data.slug }}-featured-products">
                        {% if category_data.featured_products|has_products %}
                        <div class="slider-fouc">
                            <div class="products-slider owl-carousel" data-item="4">
                                {% for product in category_data.featured_products %}
                                {% include 'includes/product-card.html' with item=product %}
                                {% endfor %}
                            </div>
                        </div>
                        {% else %}
                        <div class="product-not-found">
                            <div class="not-found">
                                <h2>SORRY!</h2>
                                <h6>No featured products available in {{ category_data.parent_category.parent_name }}.
                                </h6>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Banner for each category (optional) -->
<div class="banner-image-view-more">
    <div class="container">
        <div class="image-banner u-s-m-y-40">
            <a href="{% url 'product_by_pcategory' category_data.slug %}"
                class="mx-auto banner-hover effect-dark-opacity">
                <!-- You can add category-specific banner images -->
                <!-- <img class="img-fluid"
                    src="{% if category_data.parent_category.banner_image %}{{ category_data.parent_category.banner_image.url }}{% else %}images/banners/ban-{{ category_data.slug }}.jpg{% endif %}"
                    alt="{{ category_data.parent_category.parent_name }} Banner"> -->
            </a>
        </div>
        <div class="redirect-link-wrapper text-center u-s-p-t-25 u-s-p-b-80">
            <a class="redirect-link" href="{% url 'product_by_pcategory' category_data.slug %}">
                <span>View more {{ category_data.parent_category.parent_name }}</span>
            </a>
        </div>
    </div>
</div>
{% endfor %}






<!-- Continue-Link -->
<div class="continue-link-wrapper u-s-p-b-80">
    <a class="continue-link" href="{% url 'store' %}" title="View all products on site">
        <i class="ion ion-ios-more"></i>
    </a>
</div>
<!-- Continue-Link /- -->
<!-- Brand-Slider -->
<div class="brand-slider u-s-p-b-80">
    <div class="container">
        <div class="brand-slider-content owl-carousel" data-item="5">
            {% for brand in brands %}
            <div class="brand-pic">
                <a href="#">
                    <img src="{{ brand.prod_img.url }}" alt="{{ brand.brand_title }}">
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Brand-Slider /- -->
<!-- Site-Priorities -->
<section class="app-priority">
    <div class="container">
        <div class="priority-wrapper u-s-p-b-80">
            <div class="row">
                <div class="col-lg-3 col-md-3 col-sm-3">
                    <div class="single-item-wrapper">
                        <div class="single-item-icon">
                            <i class="ion ion-md-star"></i>
                        </div>
                        <h2>
                            Great Value
                        </h2>
                        <p>We offer competitive prices on our 100 million plus product range</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-3 col-sm-3">
                    <div class="single-item-wrapper">
                        <div class="single-item-icon">
                            <i class="ion ion-md-cash"></i>
                        </div>
                        <h2>
                            Shop with Confidence
                        </h2>
                        <p>Our Protection covers your purchase from click to delivery</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-3 col-sm-3">
                    <div class="single-item-wrapper">
                        <div class="single-item-icon">
                            <i class="ion ion-ios-card"></i>
                        </div>
                        <h2>
                            Safe Payment
                        </h2>
                        <p>Pay with the worldâ€™s most popular and secure payment methods</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-3 col-sm-3">
                    <div class="single-item-wrapper">
                        <div class="single-item-icon">
                            <i class="ion ion-md-contacts"></i>
                        </div>
                        <h2>
                            24/7 Help Center
                        </h2>
                        <p>Round-the-clock assistance for a smooth shopping experience</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Site-Priorities /- -->
{% endblock %}